class Register{constructor(){ga("send","pageview","register"),this.handlers()}handlers(){const a=$(document.body);this;a.on("submit","form#signup-submit",a=>{a.preventDefault();let b=$("#email").val(),c=$("#password").val(),d=$("#name").val();chrome.runtime.sendMessage({action:"signup",email:b,password:c,name:d,resource:"page"},a=>{a&&a.success?(ga("send","event","register","register_success"),chrome.runtime.sendMessage({action:"signin",email:b,password:c},a=>{a&&!a.success&&showAlert(a.msg)})):this.constructor.showAlert(a.msg)})}),$(document).ready(function(){$(".language-switcher span").click(function(){$(this).hasClass("en")?chrome.tabs.update({url:chrome.extension.getURL("/pages/en/register.html")}):$(this).hasClass("ru")&&chrome.tabs.update({url:chrome.extension.getURL("/pages/ru/register.html")})})})}static showAlert(a){let b=$("#error");b.html(a),b.show()}}const App=new Register;